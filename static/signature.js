(function(){function s(c){const x=c.getContext("2d");x.lineWidth=2;x.lineCap="round";let d=false,l=null;function p(e){const r=c.getBoundingClientRect();if(e.touches&&e.touches.length>0){return{x:e.touches[0].clientX-r.left,y:e.touches[0].clientY-r.top}}return{x:e.clientX-r.left,y:e.clientY-r.top}}function a(e){d=true;l=p(e);e.preventDefault()}function m(e){if(!d)return;const n=p(e);x.beginPath();x.moveTo(l.x,l.y);x.lineTo(n.x,n.y);x.stroke();l=n;e.preventDefault()}function u(e){d=false;l=null;e.preventDefault()}c.addEventListener("mousedown",a);c.addEventListener("mousemove",m);window.addEventListener("mouseup",u);c.addEventListener("touchstart",a,{passive:false});c.addEventListener("touchmove",m,{passive:false});c.addEventListener("touchend",u,{passive:false});return{clear:()=>x.clearRect(0,0,c.width,c.height),toDataURL:()=>c.toDataURL("image/png")}}const pads={};window.SignaturePad={init:function(){document.querySelectorAll("canvas.signature").forEach(c=>{pads[c.id]=s(c)});document.querySelectorAll("[data-clear]").forEach(b=>{b.addEventListener("click",()=>{const id=b.getAttribute("data-clear");if(pads[id])pads[id].clear()})})},getDataURL:function(id){if(!pads[id])return"";return pads[id].toDataURL()}};document.addEventListener("DOMContentLoaded",function(){window.SignaturePad.init()})})();